<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tax Filing - KC Resort</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; margin: 0; display: flex; background-color: #f9fafb; color: #1f2937; }
    .sidebar { width: 250px; background: #f8f9fa; padding: 20px; border-right: 1px solid #ddd; flex-shrink: 0; }
    .sidebar ul { list-style: none; padding: 0; }
    .sidebar ul li { margin-bottom: 10px; }
    .sidebar ul li a { display: block; padding: 10px 15px; color: #000; text-decoration: none; border-radius: 5px; }
    .sidebar ul li a:hover, .sidebar ul li.active a { background-color: #cce5ff; color: #0056b3; }
    .main { flex: 1; padding: 30px; }
    .cards { display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap; }
    .card { flex: 1 1 200px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .card h4 { color: #6b7280; margin-bottom: 10px; }
    .card p { font-size: 22px; font-weight: bold; color: #111827; }
    .section { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); margin-top: 30px; }
    .section h4 { margin-bottom: 15px; color: white; background: #2563eb; padding: 8px 12px; border-radius: 5px; display: inline-block; }
    .gst-info { margin-bottom: 30px; }
    .gst-summary { margin-top: 20px; margin-bottom: 30px; }
    .filters { display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-end; }
    .filter-group { display: flex; flex-direction: column; flex: 1 1 200px; }
    .filter-group label { font-size: 14px; font-weight: 600; margin-bottom: 5px; color: #374151; }
    .filter-group input { padding: 8px 10px; border: 1px solid #d1d5db; border-radius: 5px; }
    .filters .btn { padding: 10px 20px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; height: 40px; align-self: flex-end; }
    .apply-btn { background-color: #2563eb; color: white; }
    .refresh-btn { background-color: #ef4444; color: white; }
    table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; margin-top: 10px; }
    th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }
    th { background: #2563eb; color: white; }
  </style>
</head>
<body>


<!-- Sidebar -->
<div class="sidebar">
  <ul>
    <li><a href="{% url 'core:dashboard' %}">Dashboard</a></li>
    <li><a href="{% url 'rooms:room_management' %}">Room Management</a></li>
    <li><a href="{% url 'booking:booking_list' %}">Bookings</a></li>
    <li><a href="{% url 'foods:food_entry' %}">Food & Drinks</a></li>
    <li><a href="{% url 'checkin_checkout:checkin_checkout' %}">Check-In/Check-Out</a></li>
    <li><a href="{% url 'invoices:invoice_list' %}">Invoicing</a></li>
    <li><a href="{% url 'transaction:payment_list' %}">Payments</a></li>
    <li class="active"><a href="{% url 'tax_filling:tax_filling' %}">Tax Filing</a></li>
    <li><a href="{% url 'accounts:create-receptionist' %}">Users List</a></li>
    <li><a href="{% url 'products:product_list' %}">Product Management</a></li>

    {% if request.user.is_admin or request.user.is_subadmin %}
      <li><a href="{% url 'reports:dashboard' %}">Reports</a></li>
      <li><a href="{% url 'settings:dashboard' %}">Settings</a></li>
    {% endif %}
  </ul>
</div>



  <!-- Main -->
  <div class="main">
    <h2 style="color:#2563eb;">Tax Filing</h2>

    <!-- Business GST Info -->
    <div class="section gst-info">
      <h4>Business GST Details</h4>
      <p><b>Business/Company Name:</b> HOTEL KC STAYS</p>
      <p><b>GSTIN Number:</b> 33ABXPC4428J1ZG</p>
    </div>

    <!-- GST Summary -->
    <div class="cards gst-summary">
      <div class="card"><h4>Last 7 Days GST</h4><p>₹{{ summary.last7 }}</p></div>
      <div class="card"><h4>Last 15 Days GST</h4><p>₹{{ summary.last15 }}</p></div>
      <div class="card"><h4>Last 30 Days GST</h4><p>₹{{ summary.last30 }}</p></div>
    </div>

    <!-- GST Filter Section -->
    <div class="section">
      <h4>GST Filter Options</h4>
      <form method="get">
        <div class="filters">
          <div class="filter-group">{{ form.invoice.label_tag }} {{ form.invoice }}</div>
          <div class="filter-group">{{ form.from_date.label_tag }} {{ form.from_date }}</div>
          <div class="filter-group">{{ form.to_date.label_tag }} {{ form.to_date }}</div>
          <div class="filter-group">{{ form.min_gst.label_tag }} {{ form.min_gst }}</div>
          <div class="filter-group">{{ form.max_gst.label_tag }} {{ form.max_gst }}</div>
          <button type="submit" class="btn apply-btn">Apply Filter</button>
          <a href="{% url 'tax_filling:tax_filling' %}" class="btn refresh-btn">Refresh</a>
        </div>
      </form>
    </div>

    <!-- Tax Filing Table -->
    <div class="section">
      <h4>Tax Filing Details</h4>
      <table>
        <thead>
          <tr>
            <th>Invoice Number</th>
            <th>CGST Amount (₹)</th>
            <th>SGST Amount (₹)</th>
            <th>Total GST (₹)</th>
          </tr>
        </thead>
        <tbody>
          {% for b in bookings %}
          <tr>
            <td>{{ b.invoice_number }}</td>
            <td>₹{{ b.cgst_amount|floatformat:2 }}</td>
            <td>₹{{ b.sgst_amount|floatformat:2 }}</td>
            <td>₹{{ b.cgst_amount|add:b.sgst_amount|floatformat:2 }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="4">No records found</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
